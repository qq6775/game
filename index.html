<!DOCTYPE html>
<html>
<head>
    <title>å¾ªç¯é™·é˜±å¤§æŒ‘æˆ˜ - Cè¯­è¨€ä¸‰ç§å¾ªç¯æ·±åº¦è®­ç»ƒ</title>
    <style>
        body {
            font-family: 'Consolas', monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            margin: 0;
        }
        .game-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .scene {
            border: 2px solid #00ff00;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 0 10px #00ff00;
        }
        pre {
            background: #003300;
            padding: 15px;
            border-left: 3px solid #00ff00;
            overflow-x: auto;
            color: #00ff00;
            font-size: 16px;
            line-height: 1.4;
        }
        .choice {
            cursor: pointer;
            padding: 10px;
            margin: 5px;
            border: 1px solid #00ff00;
            border-radius: 5px;
            transition: all 0.3s;
        }
        .choice:hover {
            background: #004400;
            transform: translateX(5px);
        }
        .bool-choice {
            display: flex;
            gap: 20px;
        }
        .bool-btn {
            width: 100px;
            text-align: center;
        }
        .feedback {
            display: none;
            padding: 10px;
            margin: 10px 0;
            border-left: 3px solid #00ff00;
            background: rgba(0, 255, 0, 0.1);
        }
        #progress {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #00ff00;
        }
        h1, h2 {
            text-shadow: 0 0 5px #00ff00;
        }
        .terminal-text {
            animation: blink 1s infinite;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        #start-screen {
            text-align: center;
            padding: 50px 0;
        }
        .btn {
            background: #003300;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 10px 20px;
            font-family: 'Consolas', monospace;
            font-size: 18px;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s;
        }
        .btn:hover {
            background: #004400;
            box-shadow: 0 0 10px #00ff00;
        }
        .keyword {
            color: #ff00ff;
        }
        .string {
            color: #ffff00;
        }
        .comment {
            color: #888888;
        }
        .number {
            color: #00ffff;
        }
        #result {
            text-align: center;
            padding: 30px;
        }
        .badge {
            display: inline-block;
            margin: 20px;
            padding: 15px;
            border: 2px solid #00ff00;
            border-radius: 50%;
            width: 200px;
            height: 200px;
            line-height: 200px;
            font-size: 24px;
            animation: glow 2s infinite;
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px #00ff00; }
            50% { box-shadow: 0 0 20px #00ff00; }
        }
        .next-btn-container {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div id="progress">èƒ½é‡å€¼: âš¡<span id="score">100</span> | å…³å¡: <span id="level">1/12</span></div>

        <!-- å¼€å§‹ç•Œé¢ -->
        <div id="start-screen">
            <h1>ã€Šå¾ªç¯é™·é˜±å¤§æŒ‘æˆ˜ã€‹</h1>
            <h2>~ Cè¯­è¨€ä¸‰ç§å¾ªç¯æ·±åº¦è®­ç»ƒ ~</h2>
            <p class="terminal-text">ç³»ç»Ÿå¯åŠ¨ä¸­... å‡†å¤‡è¿›å…¥å¾ªç¯è®­ç»ƒæ¨¡å¼...</p>
            <p>ä½ æ˜¯ä¸€åä»£ç è°ƒè¯•ä¸“å®¶ï¼Œéœ€è¦è¯†åˆ«å¹¶ä¿®å¤å„ç§å¾ªç¯ç»“æ„ä¸­çš„é™·é˜±</p>
            <button class="btn" onclick="startGame()">å¼€å§‹æŒ‘æˆ˜</button>
        </div>

        <!-- å…³å¡1ï¼šforå¾ªç¯åŸºç¡€ -->
        <div class="scene" id="scene1" style="display:none">
            <h2>ğŸ”„ ç¬¬ä¸€å…³ï¼šforå¾ªç¯åŸºç¡€</h2>
            <p>èˆªå¤©é£è¡Œæ§åˆ¶ç³»ç»Ÿä½¿ç”¨ä»¥ä¸‹ä»£ç æ§åˆ¶å¯¼èˆªï¼š</p>
            <pre><span class="keyword">for</span> (i = 0; i < 10; i++) {
    navigation_check();
    update_trajectory(i);
}</pre>
            <div class="question">
                <p>è¿™æ®µä»£ç å­˜åœ¨ä»€ä¹ˆæ½œåœ¨é—®é¢˜ï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(1, this, 'C')">A) å¾ªç¯ä½“æ‰§è¡Œ11æ¬¡</div>
                <div class="choice" onclick="checkAnswer(1, this, 'C')">B) i++ä¼šå¯¼è‡´å¾ªç¯æ— æ³•ç»ˆæ­¢</div>
                <div class="choice" onclick="checkAnswer(1, this, 'C')">C) å˜é‡iæœªå£°æ˜</div>
            </div>
            <div class="feedback" id="feedback1"></div>
            <div class="next-btn-container" id="next-btn1" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡2ï¼šwhileå¾ªç¯åŸºç¡€ -->
        <div class="scene" id="scene2" style="display:none">
            <h2>âš ï¸ ç¬¬äºŒå…³ï¼šwhileå¾ªç¯åŸºç¡€</h2>
            <p>ç”Ÿå‘½æ”¯æŒç³»ç»Ÿçš„æ°§æ°”ç›‘æ§ä»£ç å‡ºç°å¼‚å¸¸ï¼š</p>
            <pre><span class="keyword">int</span> oxygen = <span class="number">100</span>;
<span class="keyword">while</span> (oxygen > <span class="number">0</span>) {
    printf(<span class="string">"å½“å‰æ°§æ°”æ°´å¹³: %d%%\n"</span>, oxygen);
}</pre>
            <div class="question">
                <p>è¿™æ®µä»£ç ä¼šå¯¼è‡´ä»€ä¹ˆç»“æœï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(2, this, 'A')">A) æ— é™å¾ªç¯</div>
                <div class="choice" onclick="checkAnswer(2, this, 'A')">B) æ‰“å°ä¸€æ¬¡åç»“æŸ</div>
                <div class="choice" onclick="checkAnswer(2, this, 'A')">C) æ‰“å°100æ¬¡åç»“æŸ</div>
            </div>
            <div class="feedback" id="feedback2"></div>
            <div class="next-btn-container" id="next-btn2" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡3ï¼šdo-whileå¾ªç¯åŸºç¡€ -->
        <div class="scene" id="scene3" style="display:none">
            <h2>ğŸ” ç¬¬ä¸‰å…³ï¼šdo-whileå¾ªç¯åŸºç¡€</h2>
            <p>åˆ†æèœå•äº¤äº’ç³»ç»Ÿä»£ç ï¼š</p>
            <pre><span class="keyword">int</span> choice = 0;
<span class="keyword">do</span> {
    display_menu();
    scanf(<span class="string">"%d"</span>, &choice);
} <span class="keyword">while</span> (choice != 0)</pre>
            <div class="question">
                <p>ä¸forå’Œwhileå¾ªç¯ç›¸æ¯”ï¼Œdo-whileå¾ªç¯çš„ç‹¬ç‰¹ä¹‹å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(3, this, 'B')">A) å¯ä»¥åœ¨æ¡ä»¶ä¸ºå‡æ—¶æ‰§è¡Œ</div>
                <div class="choice" onclick="checkAnswer(3, this, 'B')">B) å¾ªç¯ä½“è‡³å°‘æ‰§è¡Œä¸€æ¬¡</div>
                <div class="choice" onclick="checkAnswer(3, this, 'B')">C) å¾ªç¯æ¡ä»¶åªèƒ½æ˜¯å¸ƒå°”å€¼</div>
            </div>
            <div class="feedback" id="feedback3"></div>
            <div class="next-btn-container" id="next-btn3" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡4ï¼šforå¾ªç¯å˜ä½“ -->
        <div class="scene" id="scene4" style="display:none">
            <h2>ğŸ§© ç¬¬å››å…³ï¼šforå¾ªç¯å˜ä½“</h2>
            <p>æ£€æŸ¥ç³»ç»Ÿæ‰«æä»£ç ï¼š</p>
            <pre><span class="keyword">for</span> (; condition; ) {
    scan_system();
    update_condition(&condition);
}</pre>
            <div class="question">
                <p>è¿™ä¸ªforå¾ªç¯çš„å†™æ³•æ˜¯å¦æœ‰æ•ˆï¼Ÿ</p>
                <div class="bool-choice">
                    <div class="choice bool-btn" onclick="checkAnswer(4, this, true)">âœ“ æœ‰æ•ˆ</div>
                    <div class="choice bool-btn" onclick="checkAnswer(4, this, false)">Ã— æ— æ•ˆ</div>
                </div>
            </div>
            <div class="feedback" id="feedback4"></div>
            <div class="next-btn-container" id="next-btn4" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡5ï¼šé™·é˜±ï¼åˆ†å·é—®é¢˜ -->
        <div class="scene" id="scene5" style="display:none">
            <h2>ğŸ’¥ ç¬¬äº”å…³ï¼šéšè—åˆ†å·é™·é˜±</h2>
            <p>å¼•æ“æµ‹è¯•ä»£ç å‡ºç°æ•…éšœï¼š</p>
            <pre><span class="keyword">for</span> (int i = 0; i < 5; i++); {
    test_engine();
    report_status(i);
}</pre>
            <div class="question">
                <p>è¿™æ®µä»£ç ä¼šæ‰§è¡Œtest_engine()å‡½æ•°å¤šå°‘æ¬¡ï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(5, this, 'B')">A) 5æ¬¡</div>
                <div class="choice" onclick="checkAnswer(5, this, 'B')">B) 1æ¬¡</div>
                <div class="choice" onclick="checkAnswer(5, this, 'B')">C) 0æ¬¡</div>
            </div>
            <div class="feedback" id="feedback5"></div>
            <div class="next-btn-container" id="next-btn5" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡6ï¼šdo-whileçš„åˆ†å· -->
        <div class="scene" id="scene6" style="display:none">
            <h2>ğŸ“ ç¬¬å…­å…³ï¼šdo-whileçš„ç‰¹æ®Šè¯­æ³•</h2>
            <p>æ£€æŸ¥ç”¨æˆ·è¾“å…¥éªŒè¯ä»£ç ï¼š</p>
            <pre><span class="keyword">int</span> input;
<span class="keyword">do</span> {
    printf(<span class="string">"è¾“å…¥æ­£æ•°: "</span>);
    scanf(<span class="string">"%d"</span>, &input);
} <span class="keyword">while</span> (input <= 0) // æ³¨æ„è¿™é‡Œ</pre>
            <div class="question">
                <p>ä»¥ä¸‹å“ªé¡¹å…³äºdo-whileå¾ªç¯çš„è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(6, this, 'C')">A) do-whileå¾ªç¯ä¸éœ€è¦åˆ†å·</div>
                <div class="choice" onclick="checkAnswer(6, this, 'C')">B) do-whileå¾ªç¯åˆ†å·å¯æœ‰å¯æ— </div>
                <div class="choice" onclick="checkAnswer(6, this, 'C')">C) do-whileå¾ªç¯ç»“å°¾å¿…é¡»æœ‰åˆ†å·</div>
            </div>
            <div class="feedback" id="feedback6"></div>
            <div class="next-btn-container" id="next-btn6" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡7ï¼šæ¯”è¾ƒä¸èµ‹å€¼ -->
        <div class="scene" id="scene7" style="display:none">
            <h2>ğŸ” ç¬¬ä¸ƒå…³ï¼šæ¯”è¾ƒä¸èµ‹å€¼é™·é˜±</h2>
            <p>åˆ†ææ ¸å¿ƒç³»ç»Ÿæ§åˆ¶ä»£ç ï¼š</p>
            <pre><span class="keyword">int</span> status = 1;
<span class="keyword">while</span> (status = 0) {
    run_system();
    update_status(&status);
}</pre>
            <div class="question">
                <p>è¿™æ®µä»£ç çš„run_system()å‡½æ•°ä¼šæ‰§è¡Œå‡ æ¬¡ï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(7, this, 'A')">A) 0æ¬¡</div>
                <div class="choice" onclick="checkAnswer(7, this, 'A')">B) 1æ¬¡</div>
                <div class="choice" onclick="checkAnswer(7, this, 'A')">C) æ— é™æ¬¡</div>
            </div>
            <div class="feedback" id="feedback7"></div>
            <div class="next-btn-container" id="next-btn7" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡8ï¼šå¾ªç¯ä¸­çš„break -->
        <div class="scene" id="scene8" style="display:none">
            <h2>â›” ç¬¬å…«å…³ï¼šbreakçš„ä½œç”¨</h2>
            <p>åˆ†ææ•°æ®å¤„ç†ä»£ç ï¼š</p>
            <pre><span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i < 100; i++) {
    <span class="keyword">if</span> (process_data(i) == ERROR_CODE) {
        <span class="keyword">break</span>;
    }
    log_progress(i);
}</pre>
            <div class="question">
                <p>å¦‚æœprocess_data(5)è¿”å›ERROR_CODEï¼Œå¾ªç¯ä¼šå¦‚ä½•æ‰§è¡Œï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(8, this, 'C')">A) ç»§ç»­æ‰§è¡Œåˆ°i=99</div>
                <div class="choice" onclick="checkAnswer(8, this, 'C')">B) è·³è¿‡å½“å‰è¿­ä»£ç»§ç»­ä¸‹ä¸€æ¬¡</div>
                <div class="choice" onclick="checkAnswer(8, this, 'C')">C) ç«‹å³ç»ˆæ­¢æ•´ä¸ªå¾ªç¯</div>
            </div>
            <div class="feedback" id="feedback8"></div>
            <div class="next-btn-container" id="next-btn8" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡9ï¼šå¾ªç¯ä¸­çš„continue -->
        <div class="scene" id="scene9" style="display:none">
            <h2>â© ç¬¬ä¹å…³ï¼šcontinueçš„ä½œç”¨</h2>
            <p>åˆ†æä¼ æ„Ÿå™¨æ•°æ®å¤„ç†ä»£ç ï¼š</p>
            <pre><span class="keyword">int</span> i = 0;
<span class="keyword">while</span> (i < 10) {
    i++;
    <span class="keyword">if</span> (i % 2 == 0) {
        <span class="keyword">continue</span>;
    }
    process_sensor(i);
}</pre>
            <div class="question">
                <p>process_sensorå‡½æ•°ä¼šå¤„ç†å“ªäº›å€¼ï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(9, this, 'B')">A) 0,2,4,6,8</div>
                <div class="choice" onclick="checkAnswer(9, this, 'B')">B) 1,3,5,7,9</div>
                <div class="choice" onclick="checkAnswer(9, this, 'B')">C) æ‰€æœ‰ä»0åˆ°9çš„æ•°</div>
            </div>
            <div class="feedback" id="feedback9"></div>
            <div class="next-btn-container" id="next-btn9" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡10ï¼šåµŒå¥—å¾ªç¯ -->
        <div class="scene" id="scene10" style="display:none">
            <h2>ğŸŒ€ ç¬¬åå…³ï¼šåµŒå¥—å¾ªç¯</h2>
            <p>åˆ†æåœ°å›¾æ‰«æç³»ç»Ÿä»£ç ï¼š</p>
            <pre><span class="keyword">for</span> (<span class="keyword">int</span> x = 0; x < 3; x++) {
    <span class="keyword">for</span> (<span class="keyword">int</span> y = 0; y < 3; y++) {
        <span class="keyword">if</span> (x == 1 && y == 1) {
            <span class="keyword">break</span>;
        }
        scan_location(x, y);
    }
}</pre>
            <div class="question">
                <p>scan_locationå‡½æ•°æ€»å…±ä¼šè¢«è°ƒç”¨å¤šå°‘æ¬¡ï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(10, this, 'B')">A) 9æ¬¡</div>
                <div class="choice" onclick="checkAnswer(10, this, 'B')">B) 8æ¬¡</div>
                <div class="choice" onclick="checkAnswer(10, this, 'B')">C) 7æ¬¡</div>
            </div>
            <div class="feedback" id="feedback10"></div>
            <div class="next-btn-container" id="next-btn10" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡11ï¼šä¸‰ç§å¾ªç¯æ¯”è¾ƒ -->
        <div class="scene" id="scene11" style="display:none">
            <h2>âš–ï¸ ç¬¬åä¸€å…³ï¼šä¸‰ç§å¾ªç¯æ¯”è¾ƒ</h2>
            <p>æ¯”è¾ƒä¸‰ç§ä¸åŒå¾ªç¯çš„å®ç°ï¼š</p>
            <pre><span class="comment">// å®ç°1: forå¾ªç¯</span>
<span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i < n; i++) {
    process(i);
}

<span class="comment">// å®ç°2: whileå¾ªç¯</span>
<span class="keyword">int</span> i = 0;
<span class="keyword">while</span> (i < n) {
    process(i);
    i++;
}

<span class="comment">// å®ç°3: do-whileå¾ªç¯</span>
<span class="keyword">int</span> i = 0;
<span class="keyword">do</span> {
    process(i);
    i++;
} <span class="keyword">while</span> (i < n);</pre>
            <div class="question">
                <p>å¦‚æœn=0ï¼Œä»¥ä¸Šå“ªç§å®ç°ä¼šæ‰§è¡Œprocess()å‡½æ•°ï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(11, this, 'C')">A) å®ç°1å’Œå®ç°2</div>
                <div class="choice" onclick="checkAnswer(11, this, 'C')">B) æ‰€æœ‰å®ç°éƒ½ä¸ä¼šæ‰§è¡Œ</div>
                <div class="choice" onclick="checkAnswer(11, this, 'C')">C) åªæœ‰å®ç°3ä¼šæ‰§è¡Œ</div>
            </div>
            <div class="feedback" id="feedback11"></div>
            <div class="next-btn-container" id="next-btn11" style="display:none;">
                <button class="btn" onclick="nextLevel()">è¿›å…¥ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- å…³å¡12ï¼šç»¼åˆæŒ‘æˆ˜ -->
        <div class="scene" id="scene12" style="display:none">
            <h2>ğŸ† ç¬¬åäºŒå…³ï¼šç»ˆææŒ‘æˆ˜</h2>
            <p>ä¿®å¤ä¸»æ§ç³»ç»Ÿä¸­çš„å¾ªç¯é”™è¯¯ï¼š</p>
            <pre><span class="keyword">int</span> i = 10;

<span class="comment">// å¾ªç¯1</span>
<span class="keyword">for</span> (i = 0; i < 5; i++);
{
    printf(<span class="string">"A:%d "</span>, i);
}

<span class="comment">// å¾ªç¯2</span>
<span class="keyword">while</span> (i = 5) {
    printf(<span class="string">"B:%d "</span>, i);
    i++;
}

<span class="comment">// å¾ªç¯3</span>
<span class="keyword">do</span> {
    printf(<span class="string">"C:%d "</span>, i);
    i--;
} <span class="keyword">while</span> (i > 5)</pre>
            <div class="question">
                <p>è¿™æ®µä»£ç çš„è¾“å‡ºä¼šæ˜¯ä»€ä¹ˆï¼Ÿ</p>
                <div class="choice" onclick="checkAnswer(12, this, 'A')">A) A:5 B:5 B:6 B:7... (æ— é™å¾ªç¯)</div>
                <div class="choice" onclick="checkAnswer(12, this, 'A')">B) A:0 A:1 A:2 A:3 A:4 B:5 C:5 C:4</div>
                <div class="choice" onclick="checkAnswer(12, this, 'A')">C) ä»£ç æ— æ³•ç¼–è¯‘</div>
            </div>
            <div class="feedback" id="feedback12"></div>
            <div class="next-btn-container" id="next-btn12" style="display:none;">
                <button class="btn" onclick="showResult()">æŸ¥çœ‹ç»“æœ</button>
            </div>
        </div>

        <!-- ç»“æœé¡µ -->
        <div id="result" style="display:none">
            <h2>ğŸ‰ æ­å–œå®Œæˆè®­ç»ƒï¼</h2>
            <div class="badge">å¾ªç¯æŒæ§å¤§å¸ˆ</div>
            <p>ä½ çš„æœ€ç»ˆèƒ½é‡å€¼: <span id="final-score">0</span></p>
            <p id="master-comment"></p>
            <button class="btn" onclick="restart()">å†æ¬¡æŒ‘æˆ˜</button>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentLevel = 1;
        let score = 100;
        let totalLevels = 12;

        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('scene1').style.display = 'block';
        }

        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer(level, element, correct) {
            const feedback = document.getElementById(`feedback${level}`);
            const nextBtn = document.getElementById(`next-btn${level}`);
            let isCorrect = false;

            // ç¦ç”¨æ‰€æœ‰é€‰é¡¹
            document.querySelectorAll(`#scene${level} .choice`).forEach(choice => {
                choice.style.pointerEvents = 'none';
            });

            // åˆ¤æ–­é¢˜å‹
            if (typeof correct === 'boolean') { // åˆ¤æ–­é¢˜
                const userChoice = element.textContent.includes('âœ“');
                isCorrect = (userChoice === correct);
            } else { // é€‰æ‹©é¢˜
                isCorrect = element.textContent.startsWith(correct);
            }

            // é«˜äº®é€‰ä¸­é€‰é¡¹
            if (isCorrect) {
                element.style.backgroundColor = '#004400';
                element.style.borderColor = '#00ff00';
                element.style.boxShadow = '0 0 10px #00ff00';
            } else {
                element.style.backgroundColor = '#440000';
                element.style.borderColor = '#ff0000';
            }

            // æ˜¾ç¤ºåé¦ˆ
            feedback.style.display = 'block';
            feedback.innerHTML = isCorrect ? 
                `<p>âœ… <strong>æ­£ç¡®ï¼</strong></p><p>${getExplanation(level)}</p>` : 
                `<p>âŒ <strong>é”™è¯¯ï¼</strong></p><p>${getExplanation(level)}</p>`;

            // æ›´æ–°åˆ†æ•°
            score += isCorrect ? 10 : -15;
            document.getElementById('score').textContent = Math.max(0, score);

            // æ˜¾ç¤ºä¸‹ä¸€å…³æŒ‰é’®
            nextBtn.style.display = 'block';
        }

        // è¿›å…¥ä¸‹ä¸€å…³
        function nextLevel() {
            document.getElementById(`scene${currentLevel}`).style.display = 'none';
            currentLevel++;
            document.getElementById(`scene${currentLevel}`).style.display = 'block';
            document.getElementById('level').textContent = `${currentLevel}/${totalLevels}`;
        }

        // è·å–è§£é‡Š
        function getExplanation(level) {
            const explanations = {
                1: "å˜é‡iåœ¨ä½¿ç”¨å‰æ²¡æœ‰å£°æ˜ç±»å‹ï¼ˆå¦‚int iï¼‰ã€‚åœ¨Cè¯­è¨€ä¸­ï¼Œä½¿ç”¨æœªå£°æ˜çš„å˜é‡å¯èƒ½å¯¼è‡´ç¼–è¯‘é”™è¯¯æˆ–ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚æ­£ç¡®å†™æ³•åº”è¯¥æ˜¯'for (int i = 0; i < 10; i++)'ã€‚",
                2: "å¾ªç¯å†…éƒ¨æ²¡æœ‰æ›´æ–°oxygenå˜é‡çš„å€¼ï¼Œæ‰€ä»¥æ¡ä»¶æ°¸è¿œä¸ºçœŸï¼Œå¯¼è‡´æ— é™å¾ªç¯ã€‚åº”è¯¥æ·»åŠ 'oxygen--'æˆ–ç±»ä¼¼ä»£ç æ¥æ›´æ–°å˜é‡å€¼ã€‚", 
                3: "do-whileå¾ªç¯æ˜¯å”¯ä¸€ä¿è¯å¾ªç¯ä½“è‡³å°‘æ‰§è¡Œä¸€æ¬¡çš„å¾ªç¯ç»“æ„ï¼Œå› ä¸ºå®ƒå…ˆæ‰§è¡Œå¾ªç¯ä½“ï¼Œç„¶åæ‰æ£€æŸ¥æ¡ä»¶ã€‚è¿™ä½¿å®ƒç‰¹åˆ«é€‚åˆéœ€è¦è‡³å°‘æ‰§è¡Œä¸€æ¬¡æ“ä½œçš„åœºæ™¯ï¼Œå¦‚èœå•æ˜¾ç¤ºã€‚",
                4: "forå¾ªç¯çš„ä¸‰ä¸ªè¡¨è¾¾å¼éƒ½æ˜¯å¯é€‰çš„ã€‚è¿™ä¸ªå¾ªç¯çœç•¥äº†åˆå§‹åŒ–å’Œè¿­ä»£è¡¨è¾¾å¼ï¼Œä½†ä¾ç„¶æ˜¯æœ‰æ•ˆçš„Cè¯­è¨€ä»£ç ã€‚çœç•¥è¡¨è¾¾å¼æ—¶ï¼Œåˆ†å·ä¸èƒ½çœç•¥ã€‚è¿™ç§å†™æ³•åœ¨æŸäº›åœºæ™¯ä¸‹å¾ˆæœ‰ç”¨ã€‚",
                5: "forå¾ªç¯åé¢æœ‰ä¸€ä¸ªåˆ†å·ï¼Œè¿™å¯¼è‡´å¾ªç¯ä½“ä¸ºç©ºã€‚å¾ªç¯ç»“æŸåï¼Œå¤§æ‹¬å·å†…çš„ä»£ç ä½œä¸ºå•ç‹¬çš„ä»£ç å—æ‰§è¡Œï¼Œä¸å¾ªç¯æ— å…³ã€‚å› æ­¤test_engine()åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚æ­¤å¤–ï¼Œåœ¨ä»£ç å—ä¸­ä½¿ç”¨iå¯èƒ½å¯¼è‡´é”™è¯¯ï¼Œå› ä¸ºiçš„ä½œç”¨åŸŸå¯èƒ½å·²ç»“æŸã€‚",
                6: "do-whileå¾ªç¯åœ¨whileæ¡ä»¶åå¿…é¡»æœ‰åˆ†å·ï¼Œè¿™æ˜¯Cè¯­è¨€è¯­æ³•è§„åˆ™ã€‚è¿™ä¸å…¶ä»–å¾ªç¯ç»“æ„ä¸åŒï¼Œæ˜¯do-whileçš„ç‹¬ç‰¹ç‰¹å¾ã€‚å¿˜è®°è¿™ä¸ªåˆ†å·ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚",
                7: "å¾ªç¯æ¡ä»¶ä¸­ä½¿ç”¨äº†èµ‹å€¼è¿ç®—ç¬¦(=)è€Œéæ¯”è¾ƒè¿ç®—ç¬¦(==)ã€‚è¡¨è¾¾å¼'status = 0'å°†statusèµ‹å€¼ä¸º0ï¼Œè€Œåœ¨Cè¯­è¨€ä¸­ï¼Œ0ä½œä¸ºæ¡ä»¶è¡¨è¾¾å¼ç»“æœè¢«è§†ä¸ºå‡ï¼Œå› æ­¤å¾ªç¯ä½“ä¸€æ¬¡éƒ½ä¸ä¼šæ‰§è¡Œã€‚",
                8: "breakè¯­å¥ä¼šç«‹å³ç»ˆæ­¢å½“å‰å¾ªç¯ã€‚å½“process_data(5)è¿”å›ERROR_CODEæ—¶ï¼Œå¾ªç¯ä¼šç«‹å³è·³å‡ºï¼Œä¸å†æ‰§è¡Œåç»­è¿­ä»£ï¼Œä¹Ÿä¸æ‰§è¡Œå½“å‰è¿­ä»£ä¸­breakåçš„è¯­å¥ã€‚",
                9: "continueè¯­å¥ä¼šè·³è¿‡å½“å‰è¿­ä»£çš„å‰©ä½™ä»£ç ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå½“iä¸ºå¶æ•°æ—¶ï¼Œcontinueä¼šè·³è¿‡process_sensor(i)çš„è°ƒç”¨ï¼Œå› æ­¤åªæœ‰å¥‡æ•°1,3,5,7,9ä¼šè¢«å¤„ç†ã€‚",
                10: "å½“x=1ä¸”y=1æ—¶ï¼Œbreakè¯­å¥ä¼šç»ˆæ­¢å†…å±‚å¾ªç¯ï¼Œä½†å¤–å±‚å¾ªç¯ç»§ç»­æ‰§è¡Œã€‚è¿™æ„å‘³ç€ä½ç½®(1,1)ä¸ä¼šè¢«æ‰«æï¼Œå…¶ä»–8ä¸ªä½ç½®éƒ½ä¼šæ‰«æï¼Œå› æ­¤å‡½æ•°è°ƒç”¨æ€»æ¬¡æ•°ä¸º8æ¬¡ã€‚",
                11: "å½“n=0æ—¶ï¼Œforå¾ªç¯å’Œwhileå¾ªç¯çš„æ¡ä»¶åˆå§‹å°±ä¸æ»¡è¶³(0<0æ˜¯å‡)ï¼Œæ‰€ä»¥å®ƒä»¬çš„å¾ªç¯ä½“ä¸€æ¬¡éƒ½ä¸ä¼šæ‰§è¡Œã€‚è€Œdo-whileå¾ªç¯ä¼šå…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ï¼Œå†æ£€æŸ¥æ¡ä»¶ï¼Œæ‰€ä»¥å®ƒè‡³å°‘ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå³ä½¿æ¡ä»¶ä¸€å¼€å§‹å°±ä¸æ»¡è¶³ã€‚",
                12: "å¾ªç¯1å› ä¸ºåˆ†å·å¯¼è‡´å¾ªç¯ä½“ä¸ºç©ºï¼Œæ‰§è¡Œå®Œå¾ªç¯åi=5ã€‚å¾ªç¯2ä½¿ç”¨èµ‹å€¼(i=5)è€Œéæ¯”è¾ƒï¼Œæ¯æ¬¡å¾ªç¯éƒ½å°†iè®¾ä¸º5ï¼Œä¸”5ä¸ºçœŸï¼Œå¯¼è‡´æ— é™å¾ªç¯ï¼Œæ‰€ä»¥è¾“å‡ºä¸º'A:5 B:5 B:5 B:5...'æ— é™å¾ªç¯ã€‚å¾ªç¯3å› ä¸ºå‰é¢çš„æ— é™å¾ªç¯ï¼Œæ°¸è¿œä¸ä¼šæ‰§è¡Œã€‚"
            };
            return explanations[level];
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            document.querySelectorAll('.scene').forEach(s => s.style.display = 'none');
            document.getElementById('result').style.display = 'block';
            document.getElementById('final-score').textContent = Math.max(0, score);
            
            // æ ¹æ®åˆ†æ•°ç»™å‡ºè¯„ä»·
            const comment = document.getElementById('master-comment');
            if (score >= 160) {
                comment.textContent = "ä½ æ˜¯å¾ªç¯ç»“æ„çš„ç»å¯¹å¤§å¸ˆï¼ä½ å¯¹Cè¯­è¨€å¾ªç¯çš„ç†è§£å·²ç»è¾¾åˆ°ä¸“å®¶æ°´å¹³ã€‚";
            } else if (score >= 120) {
                comment.textContent = "ä¼˜ç§€çš„è¡¨ç°ï¼ä½ å·²ç»æŒæ¡äº†å„ç§å¾ªç¯ç»“æ„çš„æ ¸å¿ƒæ¦‚å¿µå’Œå¸¸è§é™·é˜±ã€‚";
            } else if (score >= 80) {
                comment.textContent = "ä¸é”™çš„å°è¯•ï¼ä½ å¯¹å¾ªç¯æœ‰äº†åŸºæœ¬çš„ç†è§£ï¼Œä½†è¿˜éœ€è¦æ›´å¤šç»ƒä¹ ã€‚";
            } else {
                comment.textContent = "ç»§ç»­åŠªåŠ›ï¼å¾ªç¯æ˜¯ç¼–ç¨‹ä¸­çš„é‡è¦æ¦‚å¿µï¼Œå¤šåŠ ç»ƒä¹ ä½ ä¼šè¶Šæ¥è¶Šå¥½ã€‚";
            }
        }

        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restart() {
            currentLevel = 1;
            score = 100;
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = `1/${totalLevels}`;
            document.getElementById('result').style.display = 'none';
            
            // éšè—æ‰€æœ‰åœºæ™¯ï¼Œåªæ˜¾ç¤ºå¼€å§‹å±å¹•
            document.querySelectorAll('.scene').forEach(s => {
                s.style.display = 'none';
            });
            document.getElementById('start-screen').style.display = 'block';
            
            // é‡ç½®æ‰€æœ‰åé¦ˆå’Œä¸‹ä¸€å…³æŒ‰é’®
            document.querySelectorAll('.feedback').forEach(f => {
                f.style.display = 'none';
            });
            document.querySelectorAll('.next-btn-container').forEach(n => {
                n.style.display = 'none';
            });
            
            // é‡ç½®æ‰€æœ‰é€‰é¡¹çš„æ ·å¼å’Œå¯ç‚¹å‡»çŠ¶æ€
            document.querySelectorAll('.choice').forEach(c => {
                c.style.pointerEvents = 'auto';
                c.style.backgroundColor = '';
                c.style.borderColor = '#00ff00';
                c.style.boxShadow = 'none';
            });
        }
    </script>
</body>
</html>